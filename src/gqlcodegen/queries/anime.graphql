fragment PageInfo on PageInfo {
  total
  currentPage
  lastPage
  hasNextPage
  perPage
}

fragment MediaCommon on Media {
  id
  title {
    romaji
  }
  genres
  coverImage {
    color
    large
  }
}

fragment MediaDetail on Media {
  id
  title {
    romaji
  }
  genres
  coverImage {
    color
    large
  }
}

query animeList($page: Int, $perPage: Int, $sort: [MediaSort], $search: String) {
  animeList: Page(page: $page, perPage: $perPage) {
    pageInfo {
      ...PageInfo
    }
    items: media(sort: $sort, search: $search) {
      ...MediaCommon
    }
  }
}

query animeDetail($id: Int, $type: MediaType, $isAdult: Boolean) {
  animeDetail: Media(id: $id, type: $type, isAdult: $isAdult) {
    id
    title {
      userPreferred
      romaji
      english
      native
    }
    coverImage {
      large
    }
    startDate {
      year
      month
      day
    }
    endDate {
      year
      month
      day
    }
    description
    season
    seasonYear
    type
    format
    status(version: 2)
    episodes
    duration
    chapters
    volumes
    genres
    source(version: 3)
    meanScore
    averageScore
    popularity
    relations {
      edges {
        id
        relationType(version: 2)
        node {
          id
          title {
            userPreferred
          }
          format
          type
          status(version: 2)
          bannerImage
          coverImage {
            large
          }
        }
      }
    }
    characterPreview: characters(perPage: 6, sort: [ROLE, RELEVANCE, ID]) {
      edges {
        id
        role
        name
        voiceActors(language: JAPANESE, sort: [RELEVANCE, ID]) {
          id
          name {
            userPreferred
          }
          language: languageV2
          image {
            large
          }
        }
        node {
          id
          name {
            userPreferred
          }
          image {
            large
          }
        }
      }
    }
    studios {
      edges {
        isMain
        node {
          id
          name
        }
      }
    }
    recommendations(perPage: 7, sort: [RATING_DESC, ID]) {
      pageInfo {
        total
      }
      nodes {
        id
        rating
        userRating
        mediaRecommendation {
          id
          title {
            userPreferred
          }
          format
          type
          status(version: 2)
          bannerImage
          coverImage {
            large
          }
        }
        user {
          id
          name
          avatar {
            large
          }
        }
      }
    }
  }
}
